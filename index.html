<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Manejo de Fechas</title>
  </head>
  <body>
    <script>
      let input = "2023-05-17T16:14:01";

      isGreaterThanTonight(input);

      function getTodayLastHour() {
        const timeElapsed = Date.now();
        let today = new Date(timeElapsed);
        let todayLastHour = new Date(
          today.getFullYear(),
          today.getMonth(),
          today.getDate(),
          23,
          59,
          59,
          999
        );

        return todayLastHour;
      }

      function convertToTomorrowLastHour(inputDate) {
        let date = new Date(inputDate);
        date.setDate(date.getDate() + 1); //Add 1 day

        let dateLastHour = new Date(
          date.getFullYear(),
          date.getMonth(),
          date.getDate(),
          23,
          59,
          59,
          999
        );

        return dateLastHour;
      }

      function convertDateLastHourToString(date) {
        const YYYY = date.getFullYear();
        const MM = String(date.getMonth() + 1).padStart(2, "0");
        const DD = String(date.getDate()).padStart(2, "0");

        const outputDateString = `${YYYY}-${MM}-${DD}T23:59:59.999Z`;
        return outputDateString;
      }

      function isGreaterThanTonight(inputDate) {
        let tonight = getTodayLastHour();
        let tomorrowLastHour = convertToTomorrowLastHour(inputDate);

        if (tonight >= tomorrowLastHour) {
          console.log("TRUE - MOSTRAR ROLLBACK");
        } else {
          console.log("FALSE - OCULTAR ROLLBACK");
        }
        console.log("tonight => " + convertDateLastHourToString(tonight));
        console.log(
          "tomorrowLastHour => " + convertDateLastHourToString(tomorrowLastHour)
        );
      }
    </script>
  </body>
</html>
