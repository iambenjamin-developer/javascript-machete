<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Manejo de Fechas</title>
  </head>
  <body>
    <script>
      console.log("getTodayLastHour");
      getTodayLastHour();
      console.log("convertToTomorrowLastHour(2023-02-28T16:14:01)");
      convertToTomorrowLastHour("2023-02-28T16:14:01");

      function getTodayLastHour() {
        const timeElapsed = Date.now();
        let today = new Date(timeElapsed);
        let todayLastHour = new Date(
          today.getFullYear(),
          today.getMonth(),
          today.getDate(),
          23,
          59,
          59,
          999
        );

        const YYYY = todayLastHour.getFullYear();
        const MM = String(todayLastHour.getMonth() + 1).padStart(2, "0");
        const DD = String(todayLastHour.getDate()).padStart(2, "0");

        const outputDateString = `${YYYY}-${MM}-${DD}T23:59:59.999Z`;
        console.log(outputDateString);

        return todayLastHour;
      }

      function convertToTomorrowLastHour(inputDate) {
        let date = new Date(inputDate);
        date.setDate(date.getDate() + 1); //Add 1 day

        let dateLastHour = new Date(
          date.getFullYear(),
          date.getMonth(),
          date.getDate(),
          23,
          59,
          59,
          999
        );

        const YYYY = dateLastHour.getFullYear();
        const MM = String(dateLastHour.getMonth() + 1).padStart(2, "0");
        const DD = String(dateLastHour.getDate()).padStart(2, "0");

        const outputDateString = `${YYYY}-${MM}-${DD}T23:59:59.999Z`;
        console.log(outputDateString);

        return dateLastHour;
      }
    </script>
  </body>
</html>
